{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { PureComponent } from 'react';\nimport * as firebase from 'firebase';\nimport View from \"react-native-web/dist/exports/View\";\nimport StarRating from 'react-native-star-rating';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nvar styles = require(\"../../assets/files/Styles\");\n\nvar starImage = require(\"../../assets/images/star.png\");\n\nvar ItemRating = function (_PureComponent) {\n  _inherits(ItemRating, _PureComponent);\n\n  var _super = _createSuper(ItemRating);\n\n  function ItemRating(props) {\n    var _this;\n\n    _classCallCheck(this, ItemRating);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      rating: 0\n    };\n    var itemId = props.itemId;\n    var starWidth = props.starWidth;\n    _this.commentsRef = firebase.database().ref(\"itemComments/\" + itemId);\n    return _this;\n  }\n\n  _createClass(ItemRating, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.commentsRef.on(\"child_added\", function (snapshot) {\n        _this2.commentsRef.on(\"value\", function (snap) {\n          var comments = [];\n          snap.forEach(function (row) {\n            comments.push(parseInt(row.val().rating));\n          });\n\n          _this2.setState({\n            rating: comments.reduce(function (previous, current) {\n              return previous + current;\n            }, 0) / comments.length\n          });\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var rating = this.state.rating;\n      return _jsx(View, {\n        children: _jsx(StarRating, {\n          ref: \"rating\",\n          disabled: true,\n          maxStars: 5,\n          emptyStar: 'ios-star-outline',\n          fullStar: 'ios-star',\n          halfStar: 'ios-star-half',\n          iconSet: 'Ionicons',\n          rating: rating,\n          containerStyle: {\n            width: this.props.starWidth\n          },\n          starSize: this.props.starSize,\n          emptyStarColor: '#f1c40f',\n          fullStarColor: '#f1c40f'\n        })\n      });\n    }\n  }]);\n\n  return ItemRating;\n}(PureComponent);\n\nexport { ItemRating as default };","map":{"version":3,"sources":["/root/home/projects/modern-recipe/application/components/ItemRating.js"],"names":["React","PureComponent","firebase","StarRating","styles","require","starImage","ItemRating","props","state","rating","itemId","starWidth","commentsRef","database","ref","on","snapshot","snap","comments","forEach","row","push","parseInt","val","setState","reduce","previous","current","length","width","starSize"],"mappings":";;;;;;;;;;AAAA,OAAOA,KAAP,IAAeC,aAAf,QAAmC,OAAnC;AACA,OAAO,KAAKC,QAAZ,MAA0B,UAA1B;;AAEA,OAAOC,UAAP,MAAuB,0BAAvB;;;AACA,IAAIC,MAAM,GAAGC,OAAO,6BAApB;;AAGA,IAAMC,SAAS,GAAGD,OAAO,gCAAzB;;IAEqBE,U;;;;;AACpB,sBAAaC,KAAb,EAAoB;AAAA;;AAAA;;AACnB,8BAAMA,KAAN;AACA,UAAKC,KAAL,GAAa;AACZC,MAAAA,MAAM,EAAE;AADI,KAAb;AAGA,QAAOC,MAAP,GAAiBH,KAAjB,CAAOG,MAAP;AACA,QAAOC,SAAP,GAAoBJ,KAApB,CAAOI,SAAP;AACA,UAAKC,WAAL,GAAmBX,QAAQ,CAACY,QAAT,GAAoBC,GAApB,mBAAwCJ,MAAxC,CAAnB;AAPmB;AAQnB;;;;WAED,6BAAqB;AAAA;;AACpB,WAAKE,WAAL,CAAiBG,EAAjB,CAAoB,aAApB,EAAmC,UAAAC,QAAQ,EAAI;AAC9C,QAAA,MAAI,CAACJ,WAAL,CAAiBG,EAAjB,CAAoB,OAApB,EAA6B,UAAAE,IAAI,EAAI;AACpC,cAAIC,QAAQ,GAAG,EAAf;AACAD,UAAAA,IAAI,CAACE,OAAL,CAAa,UAAAC,GAAG,EAAI;AACnBF,YAAAA,QAAQ,CAACG,IAAT,CAAcC,QAAQ,CAACF,GAAG,CAACG,GAAJ,GAAUd,MAAX,CAAtB;AACA,WAFD;;AAIA,UAAA,MAAI,CAACe,QAAL,CAAc;AACbf,YAAAA,MAAM,EAAES,QAAQ,CAACO,MAAT,CAAgB,UAACC,QAAD,EAAWC,OAAX;AAAA,qBAAuBD,QAAQ,GAAGC,OAAlC;AAAA,aAAhB,EAA2D,CAA3D,IAAgET,QAAQ,CAACU;AADpE,WAAd;AAOA,SAbD;AAcA,OAfD;AAgBA;;;WAED,kBAAU;AACT,UAAOnB,MAAP,GAAiB,KAAKD,KAAtB,CAAOC,MAAP;AACA,aACF,KAAC,IAAD;AAAA,kBACM,KAAC,UAAD;AACJ,UAAA,GAAG,EAAC,QADA;AAEI,UAAA,QAAQ,EAAE,IAFd;AAGI,UAAA,QAAQ,EAAE,CAHd;AAII,UAAA,SAAS,EAAE,kBAJf;AAKI,UAAA,QAAQ,EAAE,UALd;AAMI,UAAA,QAAQ,EAAE,eANd;AAOI,UAAA,OAAO,EAAE,UAPb;AAQI,UAAA,MAAM,EAAEA,MARZ;AASI,UAAA,cAAc,EAAE;AAACoB,YAAAA,KAAK,EAAE,KAAKtB,KAAL,CAAWI;AAAnB,WATpB;AAUI,UAAA,QAAQ,EAAE,KAAKJ,KAAL,CAAWuB,QAVzB;AAWI,UAAA,cAAc,EAAE,SAXpB;AAYN,UAAA,aAAa,EAAE;AAZT;AADN,QADE;AAkBA;;;;EAlDsC9B,a;;SAAnBM,U","sourcesContent":["import React, {PureComponent} from 'react';\nimport * as firebase from 'firebase';\nimport {View} from \"react-native\";\nimport StarRating from 'react-native-star-rating';\nvar styles = require('../../assets/files/Styles');\n\n\nconst starImage = require('../../assets/images/star.png')\n\nexport default class ItemRating extends PureComponent {\n\tconstructor (props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\trating: 0\n\t\t};\n\t\tconst {itemId} = props;\n\t\tconst {starWidth} = props;\n\t\tthis.commentsRef = firebase.database().ref(`itemComments/${itemId}`);\n\t}\n\n\tcomponentDidMount () {\n\t\tthis.commentsRef.on(\"child_added\", snapshot => {\n\t\t\tthis.commentsRef.on(\"value\", snap => {\n\t\t\t\tlet comments = [];\n\t\t\t\tsnap.forEach(row => {\n\t\t\t\t\tcomments.push(parseInt(row.val().rating));\n\t\t\t\t});\n\n\t\t\t\tthis.setState({\n\t\t\t\t\trating: comments.reduce((previous, current) => previous + current, 0) / comments.length\n\t\t\t\t});\n\n\t\t\t\t/*this.refs.rating.setCurrentRating(\n\t\t\t\t\tcomments.reduce((previous, current) => previous + current, 0) / comments.length\n\t\t\t\t);*/\n\t\t\t})\n\t\t});\n\t}\n\n\trender () {\n\t\tconst {rating} = this.state;\n\t\treturn (\n<View>\n      <StarRating\n\t\tref=\"rating\"\n          disabled={true}\n          maxStars={5}\n          emptyStar={'ios-star-outline'}\n          fullStar={'ios-star'}\n          halfStar={'ios-star-half'}\n          iconSet={'Ionicons'}\n          rating={rating}\n          containerStyle={{width: this.props.starWidth}}\n          starSize={this.props.starSize}\n          emptyStarColor={'#f1c40f'}\nfullStarColor={'#f1c40f'}\n          />\n</View>\n\t\t)\n\t}\n}"]},"metadata":{},"sourceType":"module"}